# 客户端Informer的一般用法

```golang
var ( 
    kubeClient kubernetes.Interface = xxx
    defaultResync time.Duration = 0
    informerFactory informers.SharedInformerFactory
)
informerFactory = kubeinformers.NewSharedInformerFactory(kubeClient, defaultResync)
```


...
var (
    podInformer corev1.PodInformer
    podLister corev1listers.PodLister
    podListerSynced cache.InformerSynced
)
podInformer = ctx.informerFactory.Core().V1().Pods()
podLister = podInformer.Lister()
podListerSynced = podInformer.Informer().HasSynced

podInformer.Informer().AddEventHandler(cache.ResourceEventHandlerFuncs{
		AddFunc:    xxx,
		UpdateFunc: xxx,
})
if !cache.WaitForCacheSync(stopCh, c.podListerSynced) {
    return 
}
...
go ctx.InformerFactory.Start(ctx.StopCh)
```

https://github.com/1032120121/containerd/blob/a1c88e195aa98e5fcd9bf42294caf0bbf7a543ae/filters/parser.go#L51-L57
